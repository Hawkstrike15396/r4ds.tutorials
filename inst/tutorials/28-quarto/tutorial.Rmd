---
title: Quarto
author: David Kane
tutorial:
  id: quarto-websites
output:
  learnr::tutorial:
    progressive: yes
    'allow_skip:': yes
runtime: shiny_prerendered
description: 'Tutorial for Chapter 28: Quarto and Chapter 29: Quarto formats, with
  a focus on Quarto websites.'
---

```{r setup, include = FALSE}
knitr::opts_chunk$set(echo = FALSE)
options(tutorial.exercise.timelimit = 240, 
        tutorial.storage = "local") 

library(learnr)
library(tutorial.helpers)
library(ggthemes)
library(knitr)
library(tidyverse)
library(quarto)
library(dygraphs)
library(leaflet)
library(plotly)
```

```{r copy-code-chunk, child = system.file("child_documents/copy_button.Rmd", package = "tutorial.helpers")}
```

```{r info-section, child = system.file("child_documents/info_section.Rmd", package = "tutorial.helpers")}
```

<!-- Central problem with this tutorial, as with other document/project creation exercises, is that it is unclear what approach is best for students. There are three choices: point/click from RStudio, quarto() R package, and quarto from the command line. -->

<!-- The problem with RStudio is that there is no (?) way to create the four new files in a directory which is already created. But we want to start with a directory, because we want to begin, always, with Github, then connect to an R Project. -->

<!-- The problem with quarto()/quarto is that they make certain desirable things, like doing things in the current directory and providing a title, hard. See Github for discussions. Also, we need to deal with which version we will use. Also, I could not get quarto_publish_site(server = "https://quartopub.com") to work. Very annoying! -->-->

<!-- It is tempting to create three website, using one of the three approaches each time, thereby learning a lot . . . But, for now, I will just use Quarto CLI. -->


<!-- Until quarto 1.4 and the updated quarto R package are in production, we need to install them by hand. But that is OK! By this point in their education, students should be comfortable in in doing these sorts of installations. -->

<!-- Need (?) to cover other material in these chapters, not just websites. At the least, need to review the material in the R4DS chapters. -->

<!-- Make clear whether or not students are doing this in the current RStudio instance or in a new one. Or do we not need to worry about this? -->

<!-- Show how to use theme() to make the labs elements bigger for the web. -->

<!-- Use a tibble in place of mtcars. -->

<!-- Would it be better to organize this the same way as our other work? Start with Github, connect to R project, and so on. The annoyance is that you would have to create the raw files yourself. But maybe that is good, providing an excuse to look closely at the key files? And there really aren't that many of them. -->

<!-- What is the quarto website equivalent of usethis::create_package()? We want to start with Gitgub and then connect. But then we need a function to create all the annoying files. ChatGPT says that quarto::create_site() is the function I want, but it does not seem to be exported. -->


<!-- Make use of this exchange: https://community.rstudio.com/t/how-to-set-echo-false-for-all-files-in-a-quarto-website/159435 somewhere. -->

<!-- The flow of the tutorial should be more like the flow which we show in class, and the natural flow for when you make a project. Start by creating something cool in the index.qmd file. (This corresponds to class day 1.) There will be both data download and graphics code in that first draft.  -->

<!-- Then, pull out the download code to its own R script. Have it dump out a data object, then load the data in index.qmd, where the graphics code still lives.  Now, we don't re-download the data every time we fuss with something. Then put the graphic code in a different R script, which saves the graphic. index.qmd now just loads this graphic. Very quick! (This corresponds to day 2 in class. In class, might only have time to separate out the data download. Leave graphic move as an exercise. But, in this tutorial, we should do both.) -->

<!-- Now that we have an organized/reasonable home page, we can add some other pages which do other things. Example is some of the cool interactice graphics. Only at this stage do we dive into the _quarto.yml file so that we can add these other pages to the drop down. -->

<!-- Many of the images here are not helpful. First, they don't show enough of the _quarto.yml file. Second, they could just be replaced with copy/pasted text surrounded by simple triple backticks. Copy/pasted is much easier to maintain! -->


<!-- Show how to add execute: -->
<!--                   echo: false -->

<!-- This tutorial allows for an occasion to review and explore a bunch of Quarto fun. -->

<!-- Discuss why index.qmd is named that. -->

<!-- Be more consistent with underscores and dashs: car_plot or car-plot. -->

<!-- Standardize Command+Enter or cmd+enter and so on. -->
                  
<!-- The first repo is called first-website. We need to better distinguish between three things: the Github repo, the R project which is connected to the repo and the website built from the latter. Help students to keep these different concepts clear in their own minds.  -->

<!-- Example: https://github.com/davidkane9/soccer_player_birth_months/ -->

<!-- Perhaps a useful resource when we revisit this tutorial: https://ucsb-meds.github.io/creating-quarto-websites/ -->

## Introduction
### 

*This is a ROUGH, UNFINISHED, draft.*

<!-- DK: Check these links. Add to details, key functions. -->

This tutorial covers material from [Chapter 28 Quarto](https://r4ds.hadley.nz/quarto.html) and [Chapter 29 Quarto formats](https://r4ds.hadley.nz/quarto-formats.html) in [*R for Data Science (2e)*](https://r4ds.hadley.nz/quarto.html) by Hadley Wickham, Mine Çetinkaya-Rundel, and Garrett Grolemund. Yet we will go into much more detail, especially with regard to the creation and modification of [Quarto websites](https://quarto.org/docs/websites/).

## Set up environment
### 

We need to ensure that the latest version of [Quarto](https://quarto.org/) and of the R [**quarto**](https://quarto-dev.github.io/quarto-r/) package are installed.

### Exercise 1

From the Terminal, run `quarto --version``. CP/CR.

```{r set-up-environment-ex-1}
question_text(NULL,
	answer(NULL, correct = TRUE),
	allow_retry = TRUE,
	try_again_button = "Edit Answer",
	incorrect = NULL,
	rows = 3)
```

### 

Your answer should be something like:

````
Davids-MBP:r4ds.tutorials dkane$ quarto --version
1.4.549
Davids-MBP:r4ds.tutorials dkane$ 
````

This should be at least version 1.4. Later versions of Quarto are fine. If the version number is lower than 1.4, [install the latest version of Quarto](https://quarto.org/docs/get-started/).  Restart R Studio once you have done so. 



### Exercise 2

From the Console, run `packageVersion("quarto")`. CP/CR.

```{r set-up-environment-ex-2}
question_text(NULL,
	answer(NULL, correct = TRUE),
	allow_retry = TRUE,
	try_again_button = "Edit Answer",
	incorrect = NULL,
	rows = 3)
```

### 

Answer should be this version or later.

````
> packageVersion("quarto")
[1] ‘1.3.11’
> 
````

If your version number is lower, install the development version of the [**quarto**](https://quarto-dev.github.io/quarto-r/) package by, at the Console, running:

````
remotes::install_github("quarto-dev/quarto-r")
````

### 

There are actually three ways to do most things associated with document/project creation: 

First, we can use RStudio. This is our preferred approach, since it is the easiest for beginning students. 

Second, we can use an R package like **quarto** directly. RStudio buttons are, generally, connected to R package commands.

Third, we can work with Quarto directly at the Terminal. This is often referred to as working "from the command line." R packages usually call Quarto commands behind the scenes.


## Files for a website
### 

Let's make a [Quarto](https://quarto.org/docs/websites/) website.

### Exercise 1

Create a Github repo (called "first-website"). Make sure to click the "Add a README file" check box. Copy/paste the url for its Github location.

```{r files-for-a-website-ex-1}
question_text(NULL,
	answer(NULL, correct = TRUE),
	allow_retry = TRUE,
	try_again_button = "Edit Answer",
	incorrect = NULL,
	rows = 3)
```

### 

Your answer should look something like:

```
https://github.com/davidkane9/first-website
```

It is a good idea to always start a new data science project with a Github repo.


### Exercise 2

Connect the `first-website` Github repo to an R project on your computer. Name the R project `first-website` also. Keeping the names of repos/projects aligned makes organization simpler. From the Terminal, run `ls`. CP/CR.

```{r files-for-a-website-ex-2}
question_text(NULL,
	answer(NULL, correct = TRUE),
	allow_retry = TRUE,
	try_again_button = "Edit Answer",
	incorrect = NULL,
	rows = 3)
```

### 

Your answer should look something like this:

```
Davids-MBP:first-website dkane$ ls
README.md               first-website.Rproj
Davids-MBP:first-website dkane$ 
```

The default README has an "md" suffix to indicate that it is a **M**ark**d**own document.

RStudio will automatically restart and place you within the `first-website` R project. You should also have a directory called `first-website` in the location in which you store your projects.

### Exercise 3

In the Console, load the **quarto** package with the `library()` command. Run `search()`. CP/CR.

```{r files-for-a-website-ex-3}
question_text(NULL,
	answer(NULL, correct = TRUE),
	allow_retry = TRUE,
	try_again_button = "Edit Answer",
	incorrect = NULL,
	rows = 3)
```

### 

The **quarto** package should appear in the search path. When you ask R to use a command, like `filter()` or `create_package()`, it looks in the libraries listed in the search path, in order, and uses the first version of the function which it finds.

<!-- DK: Don't really need the quarto package, do we? Maybe remove it completely? Or save it for later example!-->


### Exercise 4

In the Terminal, run `quarto create project website .`.  Don't forget the `.` at the end of the command. This indicates that the new files should be placed in the current directory. 

This command will usually result in a restart of your RStudio instance. Or it might create a second R instance, also located in the `first-website` directory. If so, delete one of the instances. It does not matter which.

In the Console, run `list.files()`. CP/CR.

```{r files-for-a-website-ex-4}
question_text(NULL,
	answer(NULL, correct = TRUE),
	allow_retry = TRUE,
	try_again_button = "Edit Answer",
	incorrect = NULL,
	rows = 3)
```

### 

Your answer should look like:

````
> list.files()
[1] "_quarto.yml"         "about.qmd"           "first-website.Rproj" "index.qmd"          
[5] "README.md"           "styles.css"         
````

The basic set of files necessary for making a Quarto website has been added to the current directory. Recall the `.` means the current directory while `..` means the directory one level above the current one.


### Exercise 5

In the Console, run `list.files(all.files = TRUE)`. CP/CR. 


```{r files-for-a-website-ex-5}
question_text(NULL,
	answer(NULL, correct = TRUE),
	allow_retry = TRUE,
	try_again_button = "Edit Answer",
	incorrect = NULL,
	rows = 3)
```

Your answer should look something like:

```
> list.files(all.files = TRUE)
 [1] "_quarto.yml"         "."                   ".."                  ".git"               
 [5] ".gitignore"          ".Rproj.user"         "about.qmd"           "first-website.Rproj"
 [9] "index.qmd"           "README.md"           "styles.css"         
```

### 

You would get the same set of failes if, in the Terminal, you ran `ls -a`. The `-a` ensures that **a**ll the files are listed, included the "hidden" ones which begin with a dot. 

### 

In general, we do not touch/manipulate "dot" directories, meaning directories whose names begin with a dot or period. Such directories are meant to be used by the operating system and other programs. For example, the program git uses the `.git` directory to store information about changes in the files in the entire project. 

### Exercise 6

In the Console, run `list.files()`. The "hidden" files will no longer appear. CP/CR.

```{r files-for-a-website-ex-6}
question_text(NULL,
    answer(NULL, correct = TRUE),
    allow_retry = TRUE,
    try_again_button = "Edit Answer",
    incorrect = NULL,
    rows = 3)
```

### 

A website is a more complex object than a single Quarto document. It has two main components. First is a "settings" file, `_quarto.yml`, which provides instructions for how the website should be constructed. Second are a collection of Quarto documents, like `index.qmd` and `about.qmd`, which will be rendered into the html files which viewers will see.


### Exercise 7

In the Console, run `readr::read_lines("_quarto.yml") |> cat(sep = "\n")`. CP/CR.


```{r files-for-a-website-ex-7}
question_text(NULL,
	answer(NULL, correct = TRUE),
	allow_retry = TRUE,
	try_again_button = "Edit Answer",
	incorrect = NULL,
	rows = 3)
```

### 

YAML files are how Quarto projects tell the world what they are. In this case, the initial lines specify that this is a website.

````
project:                                   
  type: website
````

But other values for `type` are possible.

### Exercise 8

In the Console, run `readr::read_lines("_quarto.yml")[4:10] |> cat(sep = "\n")`. CP/CR.

```{r files-for-a-website-ex-8}
question_text(NULL,
	answer(NULL, correct = TRUE),
	allow_retry = TRUE,
	try_again_button = "Edit Answer",
	incorrect = NULL,
	rows = 3)
```

### 

These lines provide meta-information about the website and its organization. 

````
website:                                        
  title: "."
  navbar:
    left:
      - href: index.qmd
        text: Home
      - about.qmd
````

Note that the "title" has no necessary connection to the name of our Github repo or the name of our R project. 

Indents and other whitespace matter in the interpretation of a YAML file.

### Exercise 9

In the Code pane, open the `_quarto.yml` file. Replace `title: "."` with `title: "A New Website"`. Save the file. 

In the Console, run `readr::read_lines("_quarto.yml")[4:10] |> cat(sep = "\n")`. CP/CR.

```{r files-for-a-website-ex-9}
question_text(NULL,
	answer(NULL, correct = TRUE),
	allow_retry = TRUE,
	try_again_button = "Edit Answer",
	incorrect = NULL,
	rows = 3)
```

### 

It is a flaw in quarto that there is no easy way to provide a title to a new project created in the current directory.

### Exercise 10

In the Console, run `readr::read_lines("_quarto.yml")[12:16] |> cat(sep = "\n")`. CP/CR.

```{r files-for-a-website-ex-10}
question_text(NULL,
	answer(NULL, correct = TRUE),
	allow_retry = TRUE,
	try_again_button = "Edit Answer",
	incorrect = NULL,
	rows = 3)
```

### 

These lines provide formatting information about the pages of the website. 

````
format:                                       
  html:
    theme: cosmo
    css: styles.css
    toc: true
````

The `css` lines tells Quarto to use the `styles.css` file, located in the same directory, for the "style" of the pages.

### Exercise 11

In the Console, run `readr::read_lines("index.qmd") |> cat(sep = "\n")`. CP/CR.


```{r files-for-a-website-ex-11}
question_text(NULL,
	answer(NULL, correct = TRUE),
	allow_retry = TRUE,
	try_again_button = "Edit Answer",
	incorrect = NULL,
	rows = 3)
```

### 

The answer should look like:

````
---                                                                                                                                    
title: "."
---

This is a Quarto website.

To learn more about Quarto websites visit <https://quarto.org/docs/websites>.
````

Whenver a web browser goes to a directory on the internet, it looks for an `index.html` file. If found, it is displayed. So, the `index.qmd` file, which we will soon render as `index.html` is important.

### Exercise 12

Open the `index.qmd` file in the Code pane. Replace `title: "."` with `title: "My First Website"`. Save the file.

In the Console, run `readr::read_lines("index.qmd") |> cat(sep = "\n")`. CP/CR.


```{r files-for-a-website-ex-12}
question_text(NULL,
	answer(NULL, correct = TRUE),
	allow_retry = TRUE,
	try_again_button = "Edit Answer",
	incorrect = NULL,
	rows = 3)
```

### 

Yes, it is a bother to have to replace `"."` twice. Very annoying! With luck, Quarto will soon allow us to specify a title when we first create these files. In the meantime, it is good to have an occasion to look closely at the files which help us to create a website.

Note that the "title" in `_quarto.yml` has no necessary connection to the "title" in `index.qmd`. The former is the title for the entire website. The later is the title for just the (yet-to-be-created) `index.html` page.


### Exercise 13

We don't want to put all the files on Github. So, add `*Rproj` to your `.gitignore` file. Save the file. Note that a new line, `/.quarto/` has been added to the `.gitignore`. We will discuss this file later.

Run `readLines(".gitignore")` in the Console. CP/CR.

```{r files-for-a-website-ex-13}
question_text(NULL,
    answer(NULL, correct = TRUE),
    allow_retry = TRUE,
    try_again_button = "Edit Answer",
    incorrect = NULL,
    rows = 3)
```

### 

Good data scientists believe in transparency and reproducibility. We want people --- include "future" us --- to be able to reproduce our work. By default, almost every file belongs on Github. But settings for R projects are both not necessary for replication and often specific to each individual. 


### Exercise 14

Commit and push all the files in the project. Run `git log` in the Terminal. CP/CR.

```{r files-for-a-website-ex-14}
question_text(NULL,
    answer(NULL, correct = TRUE),
    allow_retry = TRUE,
    try_again_button = "Edit Answer",
    incorrect = NULL,
    rows = 3)
```

### 

The output from the `git log` command is too complex for us to fully parse. If you want to learn more about how to work with git/Github and R, check out [Happy Git with R](https://happygitwithr.com/existing-github-last.html), a very useful resource.


## Rendering and previewing
### 

We now have the infrastructure for our website. We want to create (or "render") the webpages themselves and then "publish" them to somewhere on the web.

### Exercise 1

From the Terminal, run `quarto render`. CP/CR.

```{r rendering-and-previewing-ex-1}
question_text(NULL,
	answer(NULL, correct = TRUE),
	allow_retry = TRUE,
	try_again_button = "Edit Answer",
	incorrect = NULL,
	rows = 3)
```

### 

Your answer should look something like:

````
Davids-MBP:first-website dkane$ quarto render
[1/2] index.qmd
[2/2] about.qmd

Output created: _site/index.html

Davids-MBP:first-website dkane$ 
````

quarto reports to us what it has done, working on our two `qmd` files and creating a new directory, `_site`, in which it has placed an `index.html` file.

### Exercise 2

From the Console, run `list.files("_site")`. CP/CR.


```{r rendering-and-previewing-ex-2}
question_text(NULL,
	answer(NULL, correct = TRUE),
	allow_retry = TRUE,
	try_again_button = "Edit Answer",
	incorrect = NULL,
	rows = 3)
```

### 

Your answer will probably look something like:

````
> list.files("_site")
[1] "about.html"  "index.html"  "search.json" "site_libs"   "styles.css" 
>
````

The `about.html` and `index.html` files are simply the rendered `about.qmd` and `index.qmd` input files. They are placed into the `_site` directory because the convention, when constructing websites and other large projects is to separate out the outputs from the inputs. 
We won't discuss the `search.json` and `styles.css` files. The `site_libs` directory includes many files beyond the scope of this tutorial. Basic idea is that the entire `_site` directory is a functioning website, ready to be deployed.

### Exercise 3

Add `/_site/site_libs/` to the `.gitignore` file. Save the new file. From the Console, run `readLines(".gitignore")`. CP/CR.


```{r rendering-and-previewing-ex-3}
question_text(NULL,
	answer(NULL, correct = TRUE),
	allow_retry = TRUE,
	try_again_button = "Edit Answer",
	incorrect = NULL,
	rows = 3)
```

### 

This command is convenient because the `site_libs` directory contains of lot of weird files that change often enough to annoy. We don't create any of them, so we don't really need to back them up. Moreover, they will still get published directly to the web from our computer.

The initial backslash in `/_site/site_libs/` helps Git to interpret `_site` correctly. See the Regular expressions tutorial for more information. `_site/site_libs/` is a directory, so it makes sense to end the expression with a backslash.


### Exercise 4

From the Terminal, run `quarto preview`. CP/CR.

```{r rendering-and-previewing-ex-4}
question_text(NULL,
	answer(NULL, correct = TRUE),
	allow_retry = TRUE,
	try_again_button = "Edit Answer",
	incorrect = NULL,
	rows = 3)
```

### 

Your answer should look something like this:

````
Davids-MBP:first-website dkane$ quarto preview
Preparing to preview
[1/1] index.qmd

Watching files for changes
Browse at http://localhost:7412/
GET: /
````

The preview command does two things. First, it renders the `qmd` files, just like `render` does. Second, it sets up a viewer, probably your default web browser, so that you can see what the website looks like. Click around and check it out!

The message at the end indicates that quarto is now "watching" your files to see if you make any changes. If you do, it will automatically update the website.

### Exercise 5

Look at your website in the browser. (You might need to enter the url, `http://localhost:7412/` in my case, but yours will be different, by hand.) Click on the "Home" link and then copy/paste the entire screen.


```{r rendering-and-previewing-ex-5}
question_text(NULL,
	answer(NULL, correct = TRUE),
	allow_retry = TRUE,
	try_again_button = "Edit Answer",
	incorrect = NULL,
	rows = 3)
```

### 

Your answer should look like:

````
A New Website

Home
About
My First Website
This is a Quarto website.

To learn more about Quarto websites visit https://quarto.org/docs/websites.
````

The title of the entire project ("A New Website"), taken from the `_quarto.yml` file, appears in the upper left hand corner. The title of the main home page ("My First Website"), taken from the `index.qmd` file, appears at the top of the Home page, which, by default, is always the `index.html` file. 


### Exercise 6

Copy/paste the url for your previewed website.

```{r rendering-and-previewing-ex-6}
question_text(NULL,
	answer(NULL, correct = TRUE),
	allow_retry = TRUE,
	try_again_button = "Edit Answer",
	incorrect = NULL,
	rows = 3)
```

### 

Your answer should be something like:

````
http://localhost:3358/
````

The website is being "hosted" on your computer. That is what the word "localhost" refers to. It is not available on the web.


### Exercise 7

The advantage of using preview is that the website is automatically updated whenever you edit and save the underlying qmd file. Try it by changing the `about.qmd` file, replacing "About this site" with your name. Save the file. 

At the Terminal, you should see a new message. Copy and paste it here.

```{r rendering-and-previewing-ex-7}
question_text(NULL,
	answer(NULL, correct = TRUE),
	allow_retry = TRUE,
	try_again_button = "Edit Answer",
	incorrect = NULL,
	rows = 3)
```

### 

Your answer should look something like this:

````
pandoc 
  to: html
  output-file: about.html
  standalone: true
  title-prefix: A New Website
  section-divs: true
  html-math-method: mathjax
  wrap: none
  default-image-extension: png
  css:
    - styles.css
  toc: true
  
metadata
  document-css: false
  link-citations: true
  date-format: long
  lang: en
  theme: cosmo
  title: About
  
GET: /about.html

````

quarto has noticed that you changed/saved the `about.qmd` file. It rendered the new version, creating a new `about.html` which it has now "gotten" and is displaying.

### Exercise 8

Copy/paste the About page form your browser.

```{r rendering-and-previewing-ex-8}
question_text(NULL,
	answer(NULL, correct = TRUE),
	allow_retry = TRUE,
	try_again_button = "Edit Answer",
	incorrect = NULL,
	rows = 3)
```

### 

Your answer should look like this, except with your name instead of mine!

````
A New Website

Home
About
About
David Kane
````

If you want to stop `quarto preview` you can cancel the command by hitting the red stop sign which is located in the upper right of the Terminal.



## Publishing
### 

To make your website publicly visible, you need to "publish" it to the web. The Quarto documents provide a [thorough discussion](https://quarto.org/docs/publishing/) of this topic.

### Exercise 1

If you don't already have one, set up a [Quarto Pub](quartopub.com) account for hosting the website. 

* In your browser, type `quartopub.com`, it will take you directly to the website

* Click the big blue button that says **Sign Up**. 

* We recommend using your Github username and password. (It is much easier this way, so you don't have to juggle around a bunch of passwords and usernames when you want to publish.)

Copy/paste the web address of your Quarto Pub account.

```{r publishing-ex-1}
question_text(NULL,
	answer(NULL, correct = TRUE),
	allow_retry = TRUE,
	try_again_button = "Edit Answer",
	incorrect = NULL,
	rows = 3)
```

Your answer should look like this:

````
https://davidkane.quarto.pub
````

Beyond [Quarto Pub](https://quarto.org/docs/publishing/quarto-pub.html), there are other free services which you can use to host your website and other data science document, examples include [GitHub Pages](https://quarto.org/docs/publishing/github-pages.html) and [Posit Cloud](https://quarto.org/docs/publishing/posit-cloud.html).


### Exercise 2

### 

Ensure that all the files in the project have been committed and pushed. (Recall that you have, at least, edited `about.qmd` and that doing so has caused changes in other downsteam files.)

At the Terminal, type: 

`quarto publish quarto-pub` 

You will then need to hit the Return button twice, accepting the default options for account (your email address) and site name ("a-new-website"). CP/CR.


```{r publishing-ex-2}
question_text(NULL,
	answer(NULL, correct = TRUE),
	allow_retry = TRUE,
	try_again_button = "Edit Answer",
	incorrect = NULL,
	rows = 10)
```

### 

It should look like this:

```
Davids-MBP:first-website dkane$ quarto publish quarto-pub
? Publish with account: › dave.kane@gmail.com
? Site name: › a-new-website

[✓] Creating quarto-pub site

Rendering for publish:

[1/2] index.qmd
[2/2] about.qmd

[✓] Preparing to publish site
[✓] Uploading files (complete)
[✓] Deploying published site
[✓] Published site: https://davidkane.quarto.pub/a-new-website
[✓] Account site updated: https://davidkane.quarto.pub

Davids-MBP:first-website dkane$ 
```


### Exercise 3

A link to your new website should be brought up in a browser. Copy/paste the url for your website. 

```{r publishing-ex-3}
question_text(NULL,
	answer(NULL, correct = TRUE),
	allow_retry = TRUE,
	try_again_button = "Edit Answer",
	incorrect = NULL,
	rows = 3)
```

### 

It should look like:

````
https://davidkane.quarto.pub/a-new-website/
````


### Exercise 4

Check your Git tab. Assuming you committed everything before running `quarto publish quarto-pub`, as instructed, it should be easy to notice the new files. Write down the name of the new YAML file, the file with `.yml` at the end.


```{r publishing-ex-4}
question_text(NULL,
	answer(NULL, correct = TRUE),
	allow_retry = TRUE,
	try_again_button = "Edit Answer",
	incorrect = NULL,
	rows = 3)
```

### 

The `_publish.yml` is where Quarto keeps track of publishing information. This file did not exist before because you had not published the website yet. 

There *might* also be some new files, like `_site/robots.txt` and `_site/sitemap.xml`, but, as usual, we won't worry too much about weird files in the `_site` directory.

### Exercise 5

In the Console, run `readr::read_lines("_publish.yml") |> cat(sep = "\n")`. CP/CR.

```{r publishing-ex-5}
question_text(NULL,
	answer(NULL, correct = TRUE),
	allow_retry = TRUE,
	try_again_button = "Edit Answer",
	incorrect = NULL,
	rows = 3)
```

### 

Your answer should look something like:

````
> readr::read_lines("_publish.yml") |> cat(sep = "\n")
- source: project                                                                                                                      
  quarto-pub:
    - id: cfb2577e-312e-4717-892a-42b92619ebe3
      url: 'https://davidkane.quarto.pub/a-new-website'
>
````

In general, we will not edit the `_publish.yml` file directly. 

### Exercise 6

If you look closely, you will see a new directory, `.quarto`, in the Files tab. Neither this directory, nor any of the files within it, appear in the Git tab because of the `/.quarto/` line in the `.gitignore` file.

From the Console, run `list.files(".quarto")`. CP/CR.

```{r publishing-ex-6}
question_text(NULL,
	answer(NULL, correct = TRUE),
	allow_retry = TRUE,
	try_again_button = "Edit Answer",
	incorrect = NULL,
	rows = 3)
```

### 

The `.quarto` directory is like the `.git` and `.Rproj.user` directories. We will never look or change the files inside of them. Only the relevant programs --- quarto, R and RStudio --- should work with the contents of these directories. 


### Exercise 7

Open the `_quarto.yml` file in the Code pane. Change `title: "A New Website"` to `title: "A New Website, second edition"`. 

In the Console, run `readr::read_lines("_quarto.yml")[4:5] |> cat(sep = "\n")`. CP/CR.

```{r publishing-ex-7}
question_text(NULL,
	answer(NULL, correct = TRUE),
	allow_retry = TRUE,
	try_again_button = "Edit Answer",
	incorrect = NULL,
	rows = 3)
```

### 

Your answer should look like:

````
> readr::read_lines("_quarto.yml")[4:5] |> cat(sep = "\n")
website:                                 
  title: "A New Website, second edition"
>
````

Keep track of the three different places that the title of our project now exists. First, it is present in `_quarto.yml`. We have changed it there. But we have not changed it in the `_site` files which constitute the website nor in files uploaded to Quarto Pub.


### Exercise 8

Form the Terminal, run `quarto preview`. Copy and paste the text from the home page once it comes up on your browser.

```{r publishing-ex-8}
question_text(NULL,
	answer(NULL, correct = TRUE),
	allow_retry = TRUE,
	try_again_button = "Edit Answer",
	incorrect = NULL,
	rows = 3)
```

### 

Your answer should look like:

````
A New Website, second edition

Home
About
My First Website
This is a Quarto website.

To learn more about Quarto websites visit https://quarto.org/docs/websites.
````

But, if you look at the Quarto Pub version of your website, it still uses the "A New Website" title because we have not (yet) published our new version. We have, however, changed the files in the `_site` directory, as you can tell by looking at the Git tab.

### Exercise 9

From the Terminal, run `quarto publish quarto-pub`. CP/CR.

(You wil first need to stop the `quarto preview` command.) 


```{r publishing-ex-9}
question_text(NULL,
	answer(NULL, correct = TRUE),
	allow_retry = TRUE,
	try_again_button = "Edit Answer",
	incorrect = NULL,
	rows = 3)
```

### 

Your answer should look like:

````
Davids-MBP:first-website dkane$ quarto publish quarto-pub
? Publish update to: › https://davidkane.quarto.pub/a-new-website (Quarto Pub - dave.kane@gmail.com)
Rendering for publish:

[1/2] index.qmd
[2/2] about.qmd

[✓] Preparing to publish site
[✓] Uploading files (complete)
[✓] Deploying published site
[✓] Published site: https://davidkane.quarto.pub/a-new-website
[✓] Account site updated: https://davidkane.quarto.pub

Davids-MBP:first-website dkane$ 
````

Note that, even though we have changed the `title` in the `_quarto.yml` file, this change has not affected the url for the project, which still ends with `a-new-website`. Quarto Pub will select the title of the project as the url "slug" when the project is first created, but it won't change that url even if you change the title of the project.


### Exercise 10

Add `_publish.yml` to the `.gitignore` file. From the Console, run `readLines(".gitignore")`. CP/CR.

```{r publishing-ex-10}
question_text(NULL,
	answer(NULL, correct = TRUE),
	allow_retry = TRUE,
	try_again_button = "Edit Answer",
	incorrect = NULL,
	rows = 3)
```

### 

The `_publish.yml` file is like the `first-website.Rproj` file. In *theory*, they might contain private information of some sort, like logins or passwords, and so do not belong on Github. But, in reality, [they rarely](https://quarto.org/docs/publishing/rstudio-connect.html#publish-command) do. Still, we like you to practice the editing of configuration files like `.gitignore`.

### Exercise 11

Commit and push all the files in the project. Run `git log` in the Terminal. CP/CR.

```{r publishing-ex-11}
question_text(NULL,
	answer(NULL, correct = TRUE),
	allow_retry = TRUE,
	try_again_button = "Edit Answer",
	incorrect = NULL,
	rows = 3)
```

### 

Note both the simplicity *and* the complexity of your project. It is simple in that, even if our computer blew up we would be able to recreate everything from the files on Github. It is complex in that there are a lot of files, interacting in a fairly sophisticated fashion.



## Adding visualizations
### 

Let's add a visualization to your website by modifying `index.qmd`. Recall that this file will always create our "home" page because it is rendered to `index.html`. *And* browsers, by default, show `index.html`, if one exists, when they visit a new directory. 

### 

We are going to add the following plot to your website's home page.

```{r adding-visualization-0}
car_plot <- mtcars |> 
  select(mpg, wt) |> 
  ggplot(aes(wt, mpg)) +
  geom_point() +
  geom_smooth(method = "lm", formula = y ~ x, se = FALSE) +
  theme_clean() +
  labs(title = "Fuel Efficiency and Weight",
       subtitle = "Heavier cars are less fuel efficient", 
       x = "Weight (1000s of lbs)", 
       y = "MPG", 
       caption = "Henderson and Vellerman (1981)")

car_plot
```

### Exercise 1

Delete everything in `index.qmd` except for the `title: "My First Website"` surrounded by the three dashes, above and below. Run `head index.qmd` in the Terminal. CP/CR.

```{r adding-visualizations-ex-1}
question_text(NULL,
    answer(NULL, correct = TRUE),
    allow_retry = TRUE,
    try_again_button = "Edit Answer",
    incorrect = NULL,
    rows = 3)
```

### 

The material bracketed by the three dashes at the very top is called a **YAML Header**. These are very sensitive about all sorts of subtle formatting issues. `head` is a terminal command which shows the top (or "head") of a file.

As you build the website, we will ask you to share the updated files, using Terminal commands like `head`, `tail` and `cat`. `tail` shows the end (or "tail") of the file. Both `head` and `tail` take an argument `-n` which allows you to specify the number of lines from the file to show.

### Exercise 2

Create a new code chunk in `index.qmd` and load two libraries: **tidyverse** and **ggthemes**. Render the document by pressing the Render button at the top of the Code pane. If you website is still being previewed, this will update the displayed homepage automatically.

In other words, you might not have to run `quarto preview` from the Terminal. Just rendering `index.qmd` is often enough.

Copy and paste the new home page, leaving out the menu items.

```{r adding-visualizations-ex-2}
question_text(NULL,
    answer(NULL, correct = TRUE),
    allow_retry = TRUE,
    try_again_button = "Edit Answer",
    incorrect = NULL,
    rows = 3)
```

### 

You answer should look like this:

````
My First Website
library(tidyverse)

── Attaching core tidyverse packages ──────────────────────── tidyverse 2.0.0 ──
✔ dplyr     1.1.4     ✔ readr     2.1.5
✔ forcats   1.0.0     ✔ stringr   1.5.1
✔ ggplot2   3.4.4     ✔ tibble    3.2.1
✔ lubridate 1.9.2     ✔ tidyr     1.3.0
✔ purrr     1.0.2     
── Conflicts ────────────────────────────────────────── tidyverse_conflicts() ──
✖ dplyr::filter() masks stats::filter()
✖ dplyr::lag()    masks stats::lag()
ℹ Use the conflicted package (<http://conflicted.r-lib.org/>) to force all conflicts to become errors
library(ggthemes)
````

Because we have not yet added any code chunk options, the code is echoed and the messages displayed.


### Exercise 3

Create another code chunk. Add this code to it:

````
mtcars |> 
  select(mpg, wt) |> 
  ggplot(aes(wt, mpg)) +
  geom_point() +
  geom_smooth(method = "lm", formula = y ~ x, se = FALSE) +
  theme_clean() +
  labs(title = "Fuel Efficiency and Weight",
       subtitle = "Heavier cars are less fuel efficient", 
       x = "Weight (1000s of lbs)", 
       y = "MPG", 
       caption = "Henderson and Vellerman (1981)")
````

Save the file. From the Terminal, run `tail index.qmd`. CP/CR.

```{r adding-visualizations-ex-3}
question_text(NULL,
	answer(NULL, correct = TRUE),
	allow_retry = TRUE,
	try_again_button = "Edit Answer",
	incorrect = NULL,
	rows = 3)
```

### 

Render the page. You will see a nice plot, along with a lot of junk code and messages. 


### Exercise 4

Add these code chunk options to the top of the first code chunk, the one which loads the libraries.

`#| message: false`
`#| echo: false`
`#| label: setup`

### 

In the Terminal, run `head index.qmd `. CP/CR.

```{r adding-visualizations-ex-4}
question_text(NULL,
    answer(NULL, correct = TRUE),
    allow_retry = TRUE,
    try_again_button = "Edit Answer",
    incorrect = NULL,
    rows = 3)
```

### 

Code that works during your R session will not work when your website is rendered if you have not loaded the required libraries into the document. But our readers don't want to see that code, much less the messages which it produces. So, we hide them.

Note that the term `setup` is a special code chunk label. It should only be used in the chunk which loads libraries.

### Exercise 5

In the second code chunk, add the following options:

`#| echo: false`
`#| label: car-plot`

Save the changes to `index.qmd`. In the Terminal, run `tail index.qmd `. CP/CR.

```{r adding-visualizations-ex-5}
question_text(NULL,
    answer(NULL, correct = TRUE),
    allow_retry = TRUE,
    try_again_button = "Edit Answer",
    incorrect = NULL,
    rows = 3)
```

### 

Assigning labels to code chunks helps keeps you organized and helps others understand your code. You cannot assign the same label to multiple code chunks. We often use dashes in labels, as in `car-plot` since doing so makes for easier reading.

### Exercise 6

Render the `index.qmd` with the render button. It should show the plot. You could also render with Cmd-Shift-K (or Ctrl + Alt + K).

In the Terminal, run `cat index.qmd`. CP/CR.

```{r adding-visualizations-ex-6}
question_text(NULL,
    answer(NULL, correct = TRUE),
    allow_retry = TRUE,
    try_again_button = "Edit Answer",
    incorrect = NULL,
    rows = 12)
```

### Exercise 7

Go to the Git tab, then commit and push your new changes to Github. Include a descriptive commit message, e.g. "Added plot to home page".

### 

In the Terminal type `quarto publish`. You don't need to include `quarto-pub` since that information now appears in the `_publish.yml` file. You will need to hit Return once.


### 

It will not bring you to your website, but to your Quarto Pub account, where you will see the website address. Click on it and copy and paste the URL below:

```{r adding-visualizations-ex-7}
question_text(NULL,
    answer(NULL, correct = TRUE),
    allow_retry = TRUE,
    try_again_button = "Edit Answer",
    incorrect = NULL,
    rows = 3)
```

## Adding text
### 

Quarto allows for a combination of plain text and R code. This same feature allows you to add plain text to your website.

### Exercise 1

Open `about.qmd `. Delete all the current text, except for the YAML header. Add `## About Me` as the first (and only) line of text. Render the qmd. In the Terminal, run `cat about.qmd`. CP/CR.

```{r adding-text-ex-1}
question_text(NULL,
    answer(NULL, correct = TRUE),
    allow_retry = TRUE,
    try_again_button = "Edit Answer",
    incorrect = NULL,
    rows = 3)
```

### 

Hash signs in front of text makes the text into a header. The organization of headers is determined by the number of hash signs. Fewer hash signs make higher level headers, i.e. bigger text. More hash signs make lower level headers, i.e. smaller text. 


### Exercise 2

Write a one sentence description yourself. Write it below the header. Include your name and school, either the one you attend or one from which you have graduated. Write until the end of the line, i.e. do not use the Return/Enter key to wrap text. When you are finished, render the qmd.

In the Terminal, run `cat about.qmd`. CP/CR

```{r adding-text-ex-2}
question_text(NULL,
    answer(NULL, correct = TRUE),
    allow_retry = TRUE,
    try_again_button = "Edit Answer",
    incorrect = NULL,
    rows = 3)
```

### 

You can have a Quarto document without a YAML header, if you like. You can also have an empty YAML header. But, it will often be the case that we want all the files in a project to have similar YAML headers in order to create a consistent look-and-feel.


### Exercise 3

Let's bold your name. In the description you have already written surround your name with two asterisks (** **) on each side. Example:

````
My name is **David Kane**, and I graduated from Williams College.
````

Save the file. Render the qmd. In the Terminal, run `cat about.qmd`. CP/CR.

```{r adding-text-ex-3}
question_text(NULL,
    answer(NULL, correct = TRUE),
    allow_retry = TRUE,
    try_again_button = "Edit Answer",
    incorrect = NULL,
    rows = 3)
```

### 

Quarto, which is based on the Markdown language, has a variety of [formatting options](https://quarto.org/docs/authoring/markdown-basics.html).

### Exercise 4

Add a new header with two hash signs, "About the Project". Underneath the header, add a sentence about a hypothetical data science project, ideally one that you are actively considering. Include the title of your project in the sentence. Example:

````
In my project, "The Birth Months of Elite Footballer," I explore the distribution of the months --- like January versus June --- in which professional football/soccer players were born.
````

Save the file. Render the qmd. In the Terminal, run `cat about.qmd`. CP/CR.

```{r adding-text-ex-4}
question_text(NULL,
    answer(NULL, correct = TRUE),
    allow_retry = TRUE,
    try_again_button = "Edit Answer",
    incorrect = NULL,
    rows = 3)
```

### Exercise 5

Italicize the title of your project by replacing the quotation marks with a single asterisk. 

Save the file. Render the qmd. In the Terminal, run `grep "*" about.qmd`. CP/CR.

```{r adding-text-ex-5}
question_text(NULL,
    answer(NULL, correct = TRUE),
    allow_retry = TRUE,
    try_again_button = "Edit Answer",
    incorrect = NULL,
    rows = 3)
```

We need to include the quotes around `*` in order to cause `grep` to treat it as a simple character, rather than the wild card character associated with regular expressions.

### Exercise 6

Add a new header, "Goals", on a lower section level than the previous, using three hash signs.

### 

Let's created a bulleted list of at least two goals of your project. To create a bulleted list begin each line with dash and space. When you want to add a new item to the list, use enter to create a new line and add another dash and space. Render the qmd.

### 

In the Terminal, run `tail about.qmd`. CP/CR.

```{r adding-text-ex-6}
question_text(NULL,
    answer(NULL, correct = TRUE),
    allow_retry = TRUE,
    try_again_button = "Edit Answer",
    incorrect = NULL,
    rows = 3)
```

### Exercise 7

For at least one goal in your bulleted list, add a possible challenge or complication of this goal. To do so, add the text on the line underneath the goal, use tab to indent, and add a `+`and a space before the text.

### 

In the Terminal, run `grep "+" about.qmd`. CP/CR

```{r adding-text-ex-7}
question_text(NULL,
    answer(NULL, correct = TRUE),
    allow_retry = TRUE,
    try_again_button = "Edit Answer",
    incorrect = NULL,
    rows = 3)
```

### 

To create a numbered list, use numbers followed by periods, i.e. 1., instead of asterisks. Sub-items for numbered lists are created in the same way as they are for bulleted lists.

### Exercise 8

Oftentimes you want to wrap text before the default margin. For example, add Preceptor's common saying: `"This is data science"` to the `about.qmd` file. Then on the next line add `~Preceptor`. Render the qmd.

### 

Run `grep  "~" about.qmd`. CP/CR.

```{r adding-text-ex-8}
question_text(NULL,
    answer(NULL, correct = TRUE),
    allow_retry = TRUE,
    try_again_button = "Edit Answer",
    incorrect = NULL,
    rows = 3)
```

### 

This will not work. The quote and its source will be on the same line.

### Exercise 9

To create a manual line break, put the `~Preceptor` two lines below the '"This is data science"', like this:

```{r}
knitr::include_graphics("images/extra-line.png")
```

### 

Then, between the lines, add a backslash (`\`)

### 

In the Terminal, run `grep "data science" about.qmd`. CP/CR.

```{r adding-text-ex-9}
question_text(NULL,
    answer(NULL, correct = TRUE),
    allow_retry = TRUE,
    try_again_button = "Edit Answer",
    incorrect = NULL,
    rows = 3)
```

### 

A backslash is the Quarto manual line break. 

### Exercise 10

Let's create text which is also a hyperlink to the bootcamp website. Enclose the text "Kane's Free Data Science Bootcamp" in brackets `[]`. Then, without a space intervening, add parentheses `()` which enclose a link to the bootcamp website:
`https://bootcamp.davidkane.info`. Render the qmd.

### 

In the Terminal, run `tail about.qmd`. CP/CR


```{r adding-text-ex-10}
question_text(NULL,
    answer(NULL, correct = TRUE),
    allow_retry = TRUE,
    try_again_button = "Edit Answer",
    incorrect = NULL,
    rows = 3)
```

You only need a few [formatting tricks](https://quarto.org/docs/authoring/markdown-basics.html) for working with Quarto files, but you will use those tricks repeatedly.


### Exercise 11

Push all the changes to Git, and issue the `quarto publish` command in the Terminal. You need to hit Return/Enter at least once.

## Adding new pages
### 

Here you will learn how to create new pages for your website, accessible via the navigation bar at the top.

### Exercise 1

Go to `File -> New File -> Quarto Document...`. Title it "Sources". Select "Create Empty Document" (in the bottom left corner). Save the file, changing the file name from `Untitled.qmd` to `sources.qmd`. 

### 

In the Terminal, run `ls *qmd`. CP/CR.

```{r adding-new-pages-ex-1}
question_text(NULL,
    answer(NULL, correct = TRUE),
    allow_retry = TRUE,
    try_again_button = "Edit Answer",
    incorrect = NULL,
    rows = 3)
```

### 

You should see `index.qmd`, `about.qmd`, and `sources.qmd` in the output. If not, make sure you are in the `first-website` directory. The `*qmd` regular expression selects only files with names which end with the letters `qmd`.

### Exercise 2

In the `sources.qmd` file, below the YAML header, add the text `An overview of sources used in my project.` 

In the Terminal, run the command `grep overview sources.qmd`. CP/CR

```{r adding-new-pages-ex-2}
question_text(NULL,
    answer(NULL, correct = TRUE),
    allow_retry = TRUE,
    try_again_button = "Edit Answer",
    incorrect = NULL,
    rows = 3)
```

### 

`grep` is handy for finding just those lines in the target file which include the word `overview`.


### Exercise 3

Add the following sentence: 

````
These are my sources. Here are some challenges. Quarto websites are awesome.
````

Render `sources.qmd`. Run `cat sources.qmd` in the Terminal. CP/CR.

```{r adding-new-pages-ex-3}
question_text(NULL,
    answer(NULL, correct = TRUE),
    allow_retry = TRUE,
    try_again_button = "Edit Answer",
    incorrect = NULL,
    rows = 3)
```

A website, when you first look closely, my look overwhelming in its complexity. But it is usually created from of a simple collection of text files, each of them quite simple.

### Exercise 4

Open the `_quarto.yml` file. You should see a line that says `navbar`. Below this line you should see the line `left`. Below this is the code that creates the header links for the navigation bar on your site. It should look like:


```
website:
  title: "A New Website, second edition"
  navbar:
    left:
      - href: index.qmd
        text: Home
      - about.qmd
```
    

### 

To add `sources.qmd` as a new page which will appear on the menu, we need to edit this as follows:

```
website:
  title: "first-website"
  navbar:
    left:
      - href: index.qmd
        text: Home
      - about.qmd
      - href: sources.qmd
        text: Sources
```

Note the two additional lines. 

The `href` line tells Quarto to create an html page by rendering `sources.qmd` and to include that new page in the website. 

The `text` line tells Quarto to format the link in the **nav**igation tool**bar** as `"Sources"`.

Make the formatting and spacing match the preceding items in the navbar. **YAML files can be very persnickety when it comes to formatting!** When you are done, save `_quarto.yml`.

### 

In the Terminal, run `cat _quarto.yml`. CP/CR

```{r adding-new-pages-ex-4}
question_text(NULL,
    answer(NULL, correct = TRUE),
    allow_retry = TRUE,
    try_again_button = "Edit Answer",
    incorrect = NULL,
    rows = 3)
```

### 

**YAML files are *very* tricky!** Tabs and white spaces matter. The code `left` before the navbar items puts the navigation bar on the left side of your site. This can be changed to `right``.


### Exercise 5

Run `quarto publish` from the Terminal. You may need to hit enter once or twice. Check out your new project! See how "Sources" now appear on the navigation toolbar. Click on "Sources" and see how the text you added to `sources.qmd` now appears on the web.

### 

Run `ls _site/*html` in the Terminal. CP/CR.

```{r adding-new-pages-ex-5}
question_text(NULL,
    answer(NULL, correct = TRUE),
    allow_retry = TRUE,
    try_again_button = "Edit Answer",
    incorrect = NULL,
    rows = 3)
```

You should see several html pages, including `sources.html`. Quarto websites, like many similar frameworks, place all the pages which appear on the web into a single directory, like `_site` and then move that directory onto a hosting service like Quarto Pub.

### Exercise 6

In the `_quarto.yml` file, delete the two lines of code that create the link and header for the Sources page.

### 

In the Terminal, use `rm` to remove `sources.qmd`.

### 

Run `ls` in the Terminal again. CP/CR

```{r adding-new-pages-ex-6}
question_text(NULL,
    answer(NULL, correct = TRUE),
    allow_retry = TRUE,
    try_again_button = "Edit Answer",
    incorrect = NULL,
    rows = 3)
```

### 

There should not be a `sources.qmd` file. We are practicing these skills to make you more comfortable building up and tearing down the parts of a project. You need to build more than one house to get good at house-building!

### Exercise 7

Make two more Quarto documents in the same way as you did above. 

You should save them both (so they're not `untitled1` and `untitled2`). Name them `source-1.qmd` and `source-2.qmd`. In the YAML heading at the top of both documents, change the titles to `"Source 1"` and `"Source 2"`.

In the Terminal, run the command `head source-1.qmd source-2.qmd`. CP/CR.

```{r adding-new-pages-ex-7}
question_text(NULL,
    answer(NULL, correct = TRUE),
    allow_retry = TRUE,
    try_again_button = "Edit Answer",
    incorrect = NULL,
    rows = 3)
```

### 

In many terminal commands, you can provide more than one file as the target of the command. In this case, `head` will be applied to `source-1.qmd` and then `source-2.qmd` sequentially.


### Exercise 8

Let's create a drop-down menu called "Sources" through which one could visit either the page for Source 1 or Source 2 from any page in the website.

### 

We will be messing around with YAML settings to make this, so pay very close attention

The Quarto [documentation](https://quarto.org/) provides an [excellent overview](https://quarto.org/docs/websites/website-navigation.html) of approaches to website navigation. 

### Exercise 9

<!-- DK: This section is sloppy. -->

Open `_quarto.yml`.

### 

Inline with `-href:`, after `- about.qmd`, add `sidebar:sources`

### 

Inline with `navbar`, a line away from `sidebar:sources`, add `sidebar:`

### 

Add `- id: sources` 4 spaces away from the edge on the next line, like this:

```{r out.width = 500}
knitr::include_graphics("images/yaml-id.png")
```

### 

Make sure to spell it and capitalize it the exact same way as the `sidebar:sources`.

### 

The `- id: sources` will make it easier to have the dropdown menu be attached to the top navbar.

### 

Everything else (pretty much) will be inline with the `- id: sources`

### 

Inline with the `i` in `- id:`, add the following:

```
title: "Sources"
style: "floating"
background: "#ffffff"
collapse-level: 2
contents:
```

### 

We will add more into `contents` very soon.

### 

It should look exactly like this.

```{r}
knitr::include_graphics("images/exactly-how-it-looks.png")
```

### 

In the Terminal, run `cat _quarto.yml`. CP/CR.

```{r adding-new-pages-ex-9}
question_text(NULL,
    answer(NULL, correct = TRUE),
    allow_retry = TRUE,
    try_again_button = "Edit Answer",
    incorrect = NULL,
    rows = 3)
```

Let's make the actual dropdown menu.

### 

On the next two lines after `contents: `, indent once and add  `- source-1.qmd` and `- source-2.qmd`.

### 

It should look like this:

```{r out.width = 700}
knitr::include_graphics("images/more-yaml-stuff.png")
```

### Exercise 10

Go the Git tab, then commit and push your new changes to Github. Include a descriptive commit message, e.g. "Added source pages".

### 

<!-- DK: Is this right? Or are we entering Yes? -->

After pushing, type `quarto publish quarto-pub` in the Terminal and enter "Yes".

### 

You might notice that there is a sidebar throughout the entire website. Keep in mind Quarto is very new and there are still a couple of bugs. There is a very easy way to fix this problem, but we are going to fix that very soon

### 

We walked you through creating only one new page: a sources page. In your final project, disperse your code evenly throughout multiple pages; **don't just stuff everything in `index.qmd`** and call it a day. For example, if you want to make a plot, create a new plot page where you do the work for making it. Then in `index.qmd`, just include the graph object and describe it.

## Using an `.rds` file
### 

An `.rds` file allows us to save any R object in a file. When we load in an .rds, we avoid having to run the code required to make the object and simply have access to the output. This is very convenient for functions that take a long time to run, such as API requests. It can also be convenient for plots.

### Exercise 1

Go to `File -> New File -> R Script`. Press save in the left of the top panel. Name the file `make_car_plot.R`. The `.R` suffix will be added automatically.

In the Terminal, run `ls`. CP/CR.

```{r using-an-rds-file-ex-1}
question_text(NULL,
    answer(NULL, correct = TRUE),
    allow_retry = TRUE,
    try_again_button = "Edit Answer",
    incorrect = NULL,
    rows = 3)
```

Make sure that `make_car_plot.R` is one of these files. We often use scripts to to record the exact steps we used in analyzing some data or in creating a graphic. We want our work to be reproducible. We will often need to perform the same work again, albeit with some changes. A script can make that much simpler.

### Exercise 2

Though an R script will use the libraries you already have loaded if executed interactively in the Console, it is good practice to include these at the top of the script. Any script you create should run correctly, even if you have just re-started R.

In the R script, load the **tidyverse** and **ggthemes** packages using the `library()` command. 

In the Terminal, run `grep library make_car_plot.R`. CP/CR.

```{r using-an-rds-file-ex-2}
question_text(NULL,
    answer(NULL, correct = TRUE),
    allow_retry = TRUE,
    try_again_button = "Edit Answer",
    incorrect = NULL,
    rows = 3)
```

Because this is a script, you don't need to create a code chunk. Scripts are most useful for work which simply creates an object, often a graphic or new data set. 

### Exercise 3

Copy the code in the `car_plot` code chunk from `index.qmd.` Paste it into `make_car_plot.R`. Assign it to an object named `car_plot`. Save the R script.

In the Terminal, run `cat make_car_plot.R`. CP/CR.

```{r using-an-rds-file-ex-3}
question_text(NULL,
    answer(NULL, correct = TRUE),
    allow_retry = TRUE,
    try_again_button = "Edit Answer",
    incorrect = NULL,
    rows = 3)
```

### 

The answer should look like this:

````
library(tidyverse)
library(ggthemes)

car_plot <- mtcars |> 
  select(mpg, wt) |> 
  ggplot(aes(wt, mpg)) +
  geom_point() +
  geom_smooth(method = "lm", formula = y ~ x, se = FALSE) +
  theme_clean() +
  labs(title = "Fuel Efficiency and Weight",
       subtitle = "Heavier cars are less fuel efficient", 
       x = "Weight (1000s of lbs)", 
       y = "MPG", 
       caption = "Henderson and Vellerman (1981)")
````

To run the code in the R script interactively, place your cursor at the end of the line (or pipe) you want to run and press `Command/Cntrl + Enter`. 

### Exercise 4

"Ssource" the entire script by pressing the "Source" button. This takes all the code from the script and feeds it, line-by-line, to the R Console.

From the Console, run `ls()`. CP/CR.

```{r using-an-rds-file-ex-4}
question_text(NULL,
	answer(NULL, correct = TRUE),
	allow_retry = TRUE,
	try_again_button = "Edit Answer",
	incorrect = NULL,
	rows = 3)
```

### 

Your answer should look like:

````
> ls()
[1] "car_plot"
> 
````

The script has created a new object, `car_plot`, in your R environment. You can also see `car_plot` if you select the Environment tab within the Environment pane.

### Exercise 5

Restart your R session. You can never restart your R session too often. The best way to do this is with the short-cut command: `Command/Cntrl-Shift-0`. (This is the number zero, not the letter "O.")

From the Console, run `ls()`. CP/CR.

```{r using-an-rds-file-ex-5}
question_text(NULL,
	answer(NULL, correct = TRUE),
	allow_retry = TRUE,
	try_again_button = "Edit Answer",
	incorrect = NULL,
	rows = 3)
```

### 

Your answer should look like:

````
> ls()
character(0)
> 
````

`car_plot` has disappeared! Objects in the R enviroment vanish once R restarts. An that is OK! We have the script, `make_car_plot.R`, which allows us to recreate the object whenever we want.

### Exercise 6

Source `make_car_plot.R`. From the Console, run `ls()`. CP/CR.


```{r using-an-rds-file-ex-6}
question_text(NULL,
	answer(NULL, correct = TRUE),
	allow_retry = TRUE,
	try_again_button = "Edit Answer",
	incorrect = NULL,
	rows = 3)
```

### 

`car_plot` is back. If you type `car_plot` at the Console and hit `Return/Enter`, the plot will appear in the Plots tab within the Files pane.

### Exercise 7

It is often useful to save a permanent copy of an R object like a plot or a tibble. [`write_rds()`](https://readr.tidyverse.org/reference/read_rds.html) from the **readr** package is the most common approach.

From the Console, run `write_rds(car_plot, file = "mpg_v_weight_graphic.rds")`. This function does not produce any output. The first argument is the R object(s) which you want to save. The second argument is the name of the file which will hold that object.

From the Console, run `list.files(patter = "mpg")`. CP/CR.

```{r using-an-rds-file-ex-7}
question_text(NULL,
	answer(NULL, correct = TRUE),
	allow_retry = TRUE,
	try_again_button = "Edit Answer",
	incorrect = NULL,
	rows = 3)
```

### 

Your answer should look like:

````
> list.files(pattern = "mpg")
[1] "mpg_v_weight_graphic.rds"
````

The `pattern` argument to `list.files()` allows us to only look for files which match a regular expression.

There are now three objects associated with our plot. The first is the script which we used to create it. The second is the R object, `car_plot`, which only exists in the R session in which it was created. The third is the `rds` object which contains the plot and which continues to exist even after the R session ends. Indeed, the `rds` object can be committed and pushed to Github.

### Exercise 8

Restart your R session with `Cmd/Cntrl-Shift-0`. When R restarts, you should still be in the `first-website` project. At the Console, run `library(tidyverse)`. We need to reload the **tidyverse** every time we restart R.

At the Console, run `read_rds("mpg_v_weight_graphic.rds")`. CP/CR.


```{r using-an-rds-file-ex-8}
question_text(NULL,
	answer(NULL, correct = TRUE),
	allow_retry = TRUE,
	try_again_button = "Edit Answer",
	incorrect = NULL,
	rows = 3)
```

### 

Your answer should look like:

````
> read_rds("mpg_v_weight_graphic.rds")
> 
````

The value returned by `read_rds()` is whatever is contained in the `rds` object. In this case, that is a plot. But, when the object at the Console is a plot, the plot is shown in the Plot tab, as it should be in this case.


### Exercise 9

Open the `index.qmd` file. In the second code chunk, delete all the plotting code and replace it with `read_rds("mpg_v_weight_graphic.rds")`. Save the file.

In the Terminal, run `tail index.qmd`. CP/CR.

```{r using-an-rds-file-ex-9}
question_text(NULL,
	answer(NULL, correct = TRUE),
	allow_retry = TRUE,
	try_again_button = "Edit Answer",
	incorrect = NULL,
	rows = 3)
```

### 

There was nothing wrong, *per se* with having the plotting code in `index.qmd` rather than `make_car_plot.R`. The problem arises when that plotting code takes a long time to run, as it often will. We don't want to re-run all the code each time we make a small change to the website. It is much better to separate out the plotting code and only run it when we need to.

### Exercise 10

From the Terminal, run `quarto publish`. You will need to hit `return/enter` at least once. CP/CR.


```{r using-an-rds-file-ex-10}
question_text(NULL,
	answer(NULL, correct = TRUE),
	allow_retry = TRUE,
	try_again_button = "Edit Answer",
	incorrect = NULL,
	rows = 3)
```

### 

Your answer should look like this:

````
Davids-MBP:first-website dkane$ quarto publish
? Publish update to: › https://davidkane.quarto.pub/a-new-website (Quarto Pub - dave.kane@gmail.com)
Rendering for publish:

[1/3] index.qmd

processing file: index.qmd
                                             
output file: index.knit.md

[2/3] sources.qmd
[3/3] about.qmd

[✓] Preparing to publish site
[✓] Uploading files (complete)
[✓] Deploying published site
[✓] Published site: https://davidkane.quarto.pub/a-new-website
[✓] Account site updated: https://davidkane.quarto.pub

Davids-MBP:first-website dkane$ 
````

You only need `quarto publish`, instead of `quatro publish quarto-pub` because the `_publish.yml` records that this project is published on Quarto Pub. You are simply refreshing the current project, rather than creating another.

### Exercise 11

In the Files tab, within the File pane, delete `mpg_v_weight_graphic.rds`. You could also delete this file from the Console with `rm("mpg_v_weight_graphic.rds")` or from the Terminal with `rm mpg_v_weight_graphic.rds`.

From the Terminal, run `ls mpg_v_weight_graphic.rds`. CP/CR.

```{r using-an-rds-file-ex-11}
question_text(NULL,
	answer(NULL, correct = TRUE),
	allow_retry = TRUE,
	try_again_button = "Edit Answer",
	incorrect = NULL,
	rows = 3)
```

### 

Your answer should look like this:

````
Davids-MBP:first-website dkane$ ls mpg_v_weight_graphic.rds
ls: mpg_v_weight_graphic.rds: No such file or directory
Davids-MBP:first-website dkane$ 
````

There is no such file because we have deleted it. 

### Exercise 12

From the Terminal, type `quarto publish`. CP/CR. (As you might expect, this command will fail.)

```{r using-an-rds-file-ex-12}
question_text(NULL,
	answer(NULL, correct = TRUE),
	allow_retry = TRUE,
	try_again_button = "Edit Answer",
	incorrect = NULL,
	rows = 3)
```

### 

Your answer should look like this:

````
Davids-MBP:first-website dkane$ quarto publish
? Publish update to: › https://davidkane.quarto.pub/a-new-website (Quarto Pub - dave.kane@gmail.com)
Rendering for publish:

[1/3] index.qmd

processing file: index.qmd
  |...............................................            |  80% [car-plot]

Quitting from lines 15-19 [car-plot] (index.qmd)
Error in `readRDS()`:
! cannot open the connection
Backtrace:
 1. readr::read_rds("mpg_v_weight_graphic.rds")
 2. base::readRDS(con, refhook = refhook)
                                                                             
Execution halted
Davids-MBP:first-website dkane$ 
````

The error message is a little tough to parse. When problems like this occur, the best approach is to try to find the problematic qmd file and then render it alone.

### Exercise 13

Open `index.qmd` and render it by using the short-cut key: `Cmd/Cntrl-shift-k`. This will also fail. You should be able to see the failure message in the Background Jobs tab within the Console pane. Copy/paste the end of that failure message.

```{r using-an-rds-file-ex-13}
question_text(NULL,
	answer(NULL, correct = TRUE),
	allow_retry = TRUE,
	try_again_button = "Edit Answer",
	incorrect = NULL,
	rows = 3)
```

### 

The error message is the same as the one we saw with `quarto publish`. But now we know that the probem is in the `index.qmd` file specifically. 

### Exercise 14

Open the `make_car_plot.R` script. At the bottom, as this line:

````
write_rds(car_plot, file = "mpg_v_weight_graphic.rds")
````

It is separate from, and unconnected to, the pipe which creates the `car_plot` object. 

From the Terminal, run `tail make_car_plot.R`. CP/CR.

```{r using-an-rds-file-ex-14}
question_text(NULL,
	answer(NULL, correct = TRUE),
	allow_retry = TRUE,
	try_again_button = "Edit Answer",
	incorrect = NULL,
	rows = 3)
```

### 

Your answer should look like this:

````
Davids-MBP:first-website dkane$ tail make_car_plot.R 
  geom_point() +
  geom_smooth(method = "lm", formula = y ~ x, se = FALSE) +
  theme_clean() +
  labs(title = "Fuel Efficiency and Weight",
       subtitle = "Heavier cars are less fuel efficient", 
       x = "Weight (1000s of lbs)", 
       y = "MPG", 
       caption = "Henderson and Vellerman (1981)")

write_rds(car_plot, file = "mpg_v_weight_graphic.rds")
Davids-MBP:first-website dkane$ 
````

This is a common approach to scripts which are parts of larger projects. They finish by creating an object which is then used by other files in the project.

### Exercise 15

Source `make_car_plot.R`. The easiest way of doing so, as before, is to open the file in the Code pane and then click the "Source" button.

In the Terminal, run `ls mpg*`. CP/CR.

```{r using-an-rds-file-ex-15}
question_text(NULL,
	answer(NULL, correct = TRUE),
	allow_retry = TRUE,
	try_again_button = "Edit Answer",
	incorrect = NULL,
	rows = 3)
```

### 

Your answer should look like:

````
Davids-MBP:first-website dkane$ ls mpg*
mpg_v_weight_graphic.rds
Davids-MBP:first-website dkane$ 
````

`mpg*` is a regular expression which matches any file which begins with the letters `mpg`. Keep in mind that we had to run this 

### Exercise 16

Instead of creating an rds object, we could have saved an image and then loaded the image back into the `index.qmd` file. Open the `make_car_plot.R` file, remove the line `write_rds(car_plot, file = "mpg_v_weight_graphic.rds")` and replace it with:

````
ggsave(filename = "mpg_v_weight_graphic.png", car_plot)
````

Save the file and source it. From the Terminal, run `ls mpg*`. CP/CR.


```{r using-an-rds-file-ex-16}
question_text(NULL,
	answer(NULL, correct = TRUE),
	allow_retry = TRUE,
	try_again_button = "Edit Answer",
	incorrect = NULL,
	rows = 3)
```

### 

Your answer should look like:

````
Davids-MBP:first-website dkane$ ls mpg*
mpg_v_weight_graphic.png        mpg_v_weight_graphic.rds
Davids-MBP:first-website dkane$ 
````

The new file, `mpg_v_weight_graphic.png`, is an image. If you click on it in the Files tab, the plot should open.

The R script that makes the `png` file is not necessary for the building of your website. However, it is useful to include it in the directory that is uploaded to Git so that people can see the code that creates the graphic.

### Exercise 17

Open `index.qmd`. Add `library(knitr)` to the `setup` code chunk. Remove `read_rds("mpg_v_weight_graphic.rds")` from the second code chunk. Replace it with 

````
knitr::include_graphics("mpg_v_weight_graphic.png")
````

Save the file. From the Terminal, run `quarto publish`. From `index.qmd`, copy/paste the second code chunk here.

```{r using-an-rds-file-ex-17}
question_text(NULL,
	answer(NULL, correct = TRUE),
	allow_retry = TRUE,
	try_again_button = "Edit Answer",
	incorrect = NULL,
	rows = 7)
```

### 

Your answer should look like:

````
# | echo: false
# | label: car-plot
knitr::include_graphics("mpg_v_weight_graphic.png")
````

Any images you want to include on your website must be located in your project directory. While referring to images elsewhere on your computer may work when you render and build on your computer, it will not work on other people's devices or, more importantly, when you publish your site to Quarto Pub.



<!-- Really ought to expand this. First, make a process_data.R script which starts with raw data and then saves an rds file with clean data. Second, create a make_plot.R script which starts with rds file and then makes png. Create directories for data and for images. -->



## Interactive pages
### 

We will be making 3 interactive graphs on 3 separate pages. You can read more about interactive graphs and how to make them [here](http://www.htmlwidgets.org/showcase_dygraphs.html), and [here](https://quarto.org/docs/interactive/widgets/htmlwidgets.html). 

### 

This is the first graph we are going to make:

```{r echo = FALSE}
library(dygraphs)
dygraph(AirPassengers, main = "Plane Passengers 1950-1960",) |>  
  dyRangeSelector(dateWindow = c("1950-01-01", "1960-01-01"))
```

### Exercise 1

We need to make 3 new documents for our interactive pages. Make 3 Quarto Documents called `plane_passengers`, `map_london`, and `plotly`. The suffix `.qmd` will be added automatically.

### 

In `plane_passengers` change the title in the YAML header to be "Plane Passengers"

### 

Make a new code chunk at the very top and name it `plane` with the `#| label: ` option.

### 

In the code chunk, load in the library **dygraphs**.

### 

In the Terminal, run `cat plane_passengers.qmd`. CP/CR.

```{r interactive-pages-ex-1}
question_text(NULL,
    answer(NULL, correct = TRUE),
    allow_retry = TRUE,
    try_again_button = "Edit Answer",
    incorrect = NULL,
    rows = 3)
```

### 

The **dygraphs** package is an R interface to the dygraphs JavaScript charting library, and it allows you to make interactive plots.

### Exercise 2

Next, we need to start our dygraph. The data that we will be using is called AirPassengers. Below where you loaded the library **dygraphs**, add the following code:

`dygraph(AirPassengers, main = "Plane Passengers 1950-1960")`

### 

In the Terminal, run `cat "plane_passengers.qmd"`. CP/CR.

```{r interactive-pages-ex-2}
question_text(NULL,
    answer(NULL, correct = TRUE),
    allow_retry = TRUE,
    try_again_button = "Edit Answer",
    incorrect = NULL,
    rows = 3)
```

It should have the newly added code.

### 

The `AirPassengers` is the data you are using and the `main =` is the title of the plot.

### Exercise 3

Add a pipe to the end of your code and add the following code: 

`dyRangeSelector(dateWindow = c("1950-01-01", "1960-12-31"))`

### 

That will add a slider to the bottom of the graph so you can select the years you want to see.

### 

In the Terminal, run `cat plane_passengers.qmd`. CP/CR.

```{r interactive-pages-ex-3}
question_text(NULL,
    answer(NULL, correct = TRUE),
    allow_retry = TRUE,
    try_again_button = "Edit Answer",
    incorrect = NULL,
    rows = 3)
```

<!-- DK: Add knowledge! -->

### Exercise 4

This is the next interactive plot we are going to make:

```{r echo = FALSE}
leaflet() |> 
  setView(lat = 51.4993, lng =  -0.1280, zoom = 12) |> 
  addTiles() 
```

### 

In `map_london`, change the title to be "Map of London"

### 

Add a code chunk and label it `map`. Load in the library **leaflet**. Run `cat "map_london.qmd"`. CP/CR.

```{r interactive-pages-ex-4}
question_text(NULL,
    answer(NULL, correct = TRUE),
    allow_retry = TRUE,
    try_again_button = "Edit Answer",
    incorrect = NULL,
    rows = 3)
```

### 

Leaflet is one of the most popular open-source JavaScript libraries for interactive maps.

### Exercise 5

Now, we need to start building our map. The latitude we will be using is 51.4993 and the longitude we will use is -0.1280.

### 

Copy and paste the following lines below the library call:

<!-- MR: Should we explain this code more? -->

```
leaflet() |> 
  setView(lat = 51.4993, lng =  -0.1280, zoom = 12) |> 
  addTiles()

```


### 

It should give you a map of London!


### Exercise 6

**plotly** is a package that allows you to make interactive plots with objects created with `ggplot()`. 

### 

This is the plot we will be making:

```{r echo = FALSE, warning = FALSE, message = FALSE}
fun_thing <- 
  ggplot(data = ChickWeight, 
         mapping = aes(x = weight,
                       y = Diet,
                       text = weight)) + 
    geom_point(color = "black", alpha = 0.5) +
    labs(title = "Diet and Weight of Chicks",
         x = "Weight of Chick (in grams)",
         y = "Diet")

ggplotly(fun_thing, tooltip = "text")
```

### 

It uses a built-in dataset, `ChickWeight`.

Visit the `ChickWeight` help page by typing `?ChickWeight` into the console and copy the description of the dataset.

```{r interactive-pages-ex-6}
question_text(NULL,
	answer(NULL, correct = TRUE),
	allow_retry = TRUE,
	try_again_button = "Edit Answer",
	incorrect = NULL,
	rows = 3)
```

### Exercise 7

In the `plotly.qmd`, change the title in the YAML header to be "Chick Weight"

### 

Add a code chunk in which you load the libraries **plotly** and **tidyverse**.

### 

In the Terminal, run `cat plotly.qmd`. CP/CR.

```{r interactive-pages-ex-7}
question_text(NULL,
    answer(NULL, correct = TRUE),
    allow_retry = TRUE,
    try_again_button = "Edit Answer",
    incorrect = NULL,
    rows = 3)
```

<!-- DK: knowlewdge drop! -->

### Exercise 8

We need to start building our plot.

### 

Start how you normally do, with `ggplot(data = ChickWeight, mapping = aes())`. Set `x` equal to `weight`, `y` equal to `Diet`, and `text` equal to `weight` as well. `text` will come in handy when we make our plot interactive. Recall that `text` argument goes within the `aes()`. 

### 

<!-- MR: Why is this not a code exercise block? -->

Copy and paste the code you just wrote below:

```{r interactive-pages-ex-8}
question_text(NULL,
    answer(NULL, correct = TRUE),
    allow_retry = TRUE,
    try_again_button = "Edit Answer",
    incorrect = NULL,
    rows = 3)
```

### 

Interactive plots with plotly are the same as any other plot you make, just with one extra step!

### Exercise 9

Add `geom_point` and set the alpha to 0.5.

### 

Set the appropriate titles and axis labels.

Reminder: This is the plot we are making. It is not yet interactive.

```{r echo = FALSE}
ggplot(data = ChickWeight, 
                    mapping = aes(x = weight,
                                  y = Diet,
                                  text = weight)) + 
  geom_point(color = "black", alpha = 0.5) +
  labs(title = "Diet and Weight of Chicks",
       x = "Weight of Chick (in grams)",
       y = "Diet")
```

### 

Run `cat plotly.qmd` in the Terminal. CP/CR

```{r interactive-pages-ex-9}
question_text(NULL,
    answer(NULL, correct = TRUE),
    allow_retry = TRUE,
    try_again_button = "Edit Answer",
    incorrect = NULL,
    rows = 3)
```

### Exercise 10

Save the plot to an object called `chick_plot` using `<-`. 

### 

At the very bottom of the code chunk, copy and paste the following: `ggplotly(chick_plot, tooltip = "text")`. The `tooltip = "text"` will show the exact weight of the chicks when you hover over it.

### 

Copy and paste the code here.

```{r interactive-pages-ex-10}
question_text(NULL,
    answer(NULL, correct = TRUE),
    allow_retry = TRUE,
    try_again_button = "Edit Answer",
    incorrect = NULL,
    rows = 3)
```

### 

In all of the interactive pages, set `echo`, `message`, and `warning` options to `false` in the code chunk options.

### 

Now, we need to be able to get to the pages!

### Exercise 11

<!-- DK:  Add screenshot. Or at least explain better. -->

Go to the `_quarto.yml` and look under `navbar:`. You should already have a sidebar called `sources`. Additionally, add `sidebar:interactive` right under it. Inline with `- id: sources` a line under `- source-2.qmd` add `- id: interactive`. 

### 

Inline with the first `i` in `- id: interactive`, add the following lines:

      title: "Interactive Pages"
      style: "floating"
      background: "#ffffff"
      collapse-level: 3
      contents: 
      
### 

It should look like this:

```{r out.width = 700}
knitr::include_graphics("images/yaml.png")
```

### 

In `contents:`, inline with the first `n`, add the following:

        - plane_passengers.qmd
        - map_london.qmd
        - plotly.qmd
        
### 

It should look like this:

```{r}
knitr::include_graphics("images/finished-yaml.png")
```

### 

<!-- MR: There was a version compatibility issue with Knitr 1.43 and Quarto 1.353. Was able to fix by just installing quarto 1.361 -->

Save, push everything to Git, and type `quarto publish quarto-pub` in the Terminal.

### 

If you don't like how the generic website looks, you can go to the bottom of the `_quarto.yaml` file, where it says `theme: cosmo` and you can change it to [any of these](https://bootswatch.com/). Some good simple themes are: yeti, slate, flatly, darkly, sandstone, and united (all lowercase).

## Citations
### 

<!-- DK: Switch to @ usage. -->

The Quarto [documentation](https://quarto.org/) provides [details](https://quarto.org/docs/authoring/footnotes-and-citations.html) about how to create academic citations. There are many possible approaches. In this section, we provide a simple introduction.


### Exercise 1

There are multiple ways to make citations, you can make them manually, or with a citation manager like [Zotero](https://www.zotero.org/) or [CiteDrive](https://www.citedrive.com/). We will be making them manually.

### 

Make a folder called `bib` with `mkdir` from the Terminal. In there, create an empty text file called `references.bib` and save it in `bib`. You will manually make and place references `references.bib`.

### 

Copy and paste the following into `references.bib`:

```
@article{Turing1936,
	author = {Turing, Alan Mathison},
	journal = {Journal of Math},
	number = {345-363},
	pages = {230--265},
	title = {On Computable Numbers, with an Application to the {Entscheidungsproblem}},
	volume = {58},
	year = {1936}}

@article{Lovelace1842,
	author = {Lovelace, Augusta Ada},
	journal = {Taylor's Scientific Memoirs},
	pages = {666--731},
	title = {Sketch of the Analytical Engine Invented by {Charles Babbage}, by {LF Menabrea}, Officer of the Military Engineers, with Notes Upon the Memoir by the Translator},
	volume = {3},
	year = {1842}}

```

Save the file. It is always a good idea for text files, like this one, to have a blank line as the last line in the file.

### 

This will allow you to put `bibliography: bib/references.bib` in any YAML header in the website, making it so you can cite anything in this .bib file.

### 

Run `cat bib/references.bib` in the Terminal. CP/CR

```{r citations-ex-1}
question_text(NULL,
    answer(NULL, correct = TRUE),
    allow_retry = TRUE,
    try_again_button = "Edit Answer",
    incorrect = NULL,
    rows = 3)
```

<!-- DK: Teach them something about BibTex, @ and so on! -->

### Exercise 2

In Source 1, put `bibliography: bib/references.bib` in the YAML headers, inline with title. 

```
---
title: "Source 1"
bibliography: bib/references.bib
---
```

### 

As best we can tell, the bibliography information has to go into each of the Quarto documents in your project which use citations. There is no way to specify it in the `_quarto.yml`.

### 

In the Terminal, run `cat source-1.qmd`. CP/CR.

```{r citations-ex-2}
question_text(NULL,
    answer(NULL, correct = TRUE),
    allow_retry = TRUE,
    try_again_button = "Edit Answer",
    incorrect = NULL,
    rows = 3)
```

<!-- DK: Drop some knowledge about BibTex and related issues. -->


<!-- The citations are automatically in Chicago, you can download different csl files from [Zotero Style Repository](https://www.zotero.org/styles), and add that to the YAML header. -->

### Exercise 3

In Source 1, write the following sentence in the body of the document, i.e., not in the YAML header.

```
@Lovelace1842 is an interesting reference.
```

Render `source-1.Rmd`. You will see in the resulting html that the citation has been "resolved" and that the full reference has been added at the bottom of the page.

### 

Run `cat source-1.qmd` in the Terminal. CP/CR.

```{r citations-ex-3}
question_text(NULL,
    answer(NULL, correct = TRUE),
    allow_retry = TRUE,
    try_again_button = "Edit Answer",
    incorrect = NULL,
    rows = 3)
```

Note that rendering a single page does nothing to change your actual website. To see these changes on the website, you must run `quarto publish` at the Terminal. 




## Summary
### 

This tutorial covered material from [Chapter 28 Quarto](https://r4ds.hadley.nz/quarto.html) and [Chapter 29 Quarto formats](https://r4ds.hadley.nz/quarto-formats.html) in [*R for Data Science (2e)*](https://r4ds.hadley.nz/quarto.html) by Hadley Wickham, Mine Çetinkaya-Rundel, and Garrett Grolemund. We went into much more detail, especially with regard to the creation and modification of [Quarto websites](https://quarto.org/docs/websites/).


```{r download-answers, child = system.file("child_documents/download_answers.Rmd", package = "tutorial.helpers")}
```
