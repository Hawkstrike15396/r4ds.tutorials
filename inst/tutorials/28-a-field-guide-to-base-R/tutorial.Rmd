---
title: A field guide to base R
author: David Kane and Aryan Kancherla
tutorial:
  id: a-field-guide-to-base-R
output:
  learnr::tutorial:
    progressive: yes
    allow_skip: yes
runtime: shiny_prerendered
description: 'Tutorial for Chapter 28: A field guide to base R'
---

```{r setup, include = FALSE}
library(learnr)
library(tutorial.helpers)
library(tidyverse)

knitr::opts_chunk$set(echo = FALSE)
options(tutorial.exercise.timelimit = 60, 
        tutorial.storage = "local") 


x <- c("one", "two", "three", "four", "five")

x2 <- c(10, 3, NA, 5, 8, 1, NA)

x3 <- c(abc = 1, def = 2, xyz = 5)


```

```{r copy-code-chunk, child = system.file("child_documents/copy_button.Rmd", package = "tutorial.helpers")}
```

```{r info-section, child = system.file("child_documents/info_section.Rmd", package = "tutorial.helpers")}
```

<!-- DK: Fix exercise code blocks with exercise = TRUE. Use the template in the future. Fixed -->

## Introduction
### 

This tutorial covers [Chapter 28: A field guide to base R](https://r4ds.hadley.nz/base-r) from [*R for Data Science (2e)*](https://r4ds.hadley.nz/) by Hadley Wickham, Mine Çetinkaya-Rundel, and Garrett Grolemund. 

In this chapter, we’ll focus on four big topics: subsetting with [, subsetting with [[ and $, the apply family of functions, and for loops. To finish off, we’ll briefly discuss two essential plotting functions. These topics are particularly useful as you do more programming and will help you read code you’ll encounter in the wild.

## Subsetting with a single bracket
### 

The `[` bracket can be used to extract sub-components from data frames and vectors, with the syntax `x[i]`. `x` represents the vector and `i` represents the position of the value inside of `x` (1st element is position 1, second element is position 2, and so forth). 

### Exercise 1

Load the tidyverse library

```{r subsetting-with-a-si-1, exercise = TRUE}

```

### 

There are five main types of things that you can subset a vector with, which will be covered in the following exercises:

1) A vector of positive integers
2) A vector of negative integers
3) A logical vector
4) A character vector
5) Nothing

### Exercise 2

Press "Run Code".

```{r subsetting-with-a-si-2, exercise = TRUE}
x <- c("one", "two", "three", "four", "five")
```

### 

This code sets the variable `x` to the vector `c("one", "two", "three", "four", "five")`. 

### Exercise 3

Extract the first element of `x` by typing `x[]` with the number `1` inside the brackets

```{r subsetting-with-a-si-3, exercise = TRUE}

```

```{r subsetting-with-a-si-3-hint-1, eval = FALSE}
x[...]
```

### 

As you can see, the code extracts the first value of the `x` vector, printing out the value "one". 

### Exercise 4

We can also pass in a vector to `[]`, containing various positions to extract from `x`. In the code chunk below, extract the 2nd, 3rd, and 4th values of `x`, using `c()`

```{r subsetting-with-a-si-4, exercise = TRUE}

```

```{r subsetting-with-a-si-4-hint-1, eval = FALSE}
x[c(..., ..., ...)]
```

### 

When you run the code above, you should see that it extracts "two", "three", and "four". By using vectors inside `[]`, you can extract multiple elements at once.

### Exercise 5

Along with passing in a vector of positive values into `[]`, you can also pass in a vector of negative values. Run the following code and observe what happens.

```{r subsetting-with-a-si-5, exercise = TRUE}
x[c(-1, -2)]
```

### 

Negative values drop the elements at the specified positions. The code above drops the first and second elements, returning "three", "four", and "five".

### Exercise 6

Subsetting with logical vectors are another type of thing that you can subset a vector with. Run the code below.

```{r subsetting-with-a-si-6, exercise = TRUE}
x2 <- c(10, 3, NA, 5, 8, 1, NA)
```

### 

Subsetting with a logical vector keeps all values corresponding to a TRUE value. This is most often useful in conjunction with the comparison functions.

### Exercise 7

`is.na()` is a function that identifies missing values in vectors, data frames, etc. In the code chunk below, type `x2[]`, placing `is.na(x2)` inside of the brackets.


```{r subsetting-with-a-si-7, exercise = TRUE}

```

<button onclick = "transfer_code(this)">Copy previous code</button>

```{r subsetting-with-a-si-7-hint-1, eval = FALSE}
x2[is.na(x2)]
```

### 

This code prints out the missing values (the `NA`'s) stored inside `x2`. Unlike `filter()`, NA indicies will be included in the output as `NA`'s.

### Exercise 8

Let's extract all the even values of `x2`. In the code chunk below, type `x2[]` and extract the even numbers using the `%%` operator.


```{r subsetting-with-a-si-8, exercise = TRUE}

```

```{r subsetting-with-a-si-8-hint-1, eval = FALSE}
x2[x2 %% 2 == 0]
```

### 

The `%%` operator is used to calculate the remainder of the division of 2 numbers. So, by placing `x2 %% 2 == 0` inside the brackets, the code will search through each element of `x2` and return all of the numbers with a remainder of 0 when divided by 2 (thus being an even number).

### Exercise 9

The last kind of vector that you can subset is a character vector. Using the following vector below, lets extract the `xyz` element. On a new line, type `x3` followed with a pair of brackets, passing in the string `"xyz"`

```{r subsetting-with-a-si-9, exercise = TRUE}
x3 <- c(abc = 1, def = 2, xyz = 5)
```

```{r subsetting-with-a-si-9-hint-1, eval = FALSE}
x3["..."]
```

### 

Along with sub-setting logical, character, and integer vectors, you can also subset nothing. For example, by running `x[]` on the code above, it'll just return the vector `x`.


### Exercise 10

Sub-setting can not only be used on vectors; they work on data sets too. In the code chunk below, create a tibble called `df`. The first argument, `x`, should contain a range of numbers from 1 to 3. The second argument, `y`, should be set to `c("a", "e", "f")`. The third argument, `z`, should be set to `runif(3)`. After completing this, run `df` on a new line.


```{r subsetting-with-a-si-10, exercise = TRUE}

```

```{r subsetting-with-a-si-10-hint-1, eval = FALSE}
... <- tibble(x = ... : ...,
              y = c("...", "...", "..."),
              z = runif(...)
              )
```

### 

There are many ways to use `[` with data sets, but the most common way is to subset by selecting rows and columns, with the syntax `df[row, col]`.


### Exercise 11

Using `df`,  let's extract the letter "a". Copy the previous code and on a new line, type `df` followed by a pair of brackets. In the brackets, type `1,2`. 
```{r subsetting-with-a-si-11, exercise = TRUE}

```

<button onclick = "transfer_code(this)">Copy previous code</button>

```{r subsetting-with-a-si-11-hint-1, eval = FALSE}
df[... , ...]
```

### 

This extracts the element in the 1st row, 2nd column, which is the letter "a". 

### Exercise 12

You can also leave the row/column input blank when extracting data from a data set. For example, `df[rows, ]` returns the specified row(s) and all columns in the data set, while `df[, cols]` returns all rows and the specified column(s) in the data set. 

Copy `df` from the previous exercise, and using `df`, extract all the rows in `df`, as well as the columns `x` and `z`.

```{r subsetting-with-a-si-12, exercise = TRUE}

```

```{r subsetting-with-a-si-12-hint-1, eval = FALSE}
df[, c("...", "...")]
```

### 

As you can see, by leaving the first part of the subset blank (the part before the comma), the code returns all of the rows in `df`, but only returns columns `x` and `z` due to the vector inputted after the comma.

### Exercise 13

There’s an important difference between tibbles and data frames when it comes to [. In the tutorials, we’ve mainly used tibbles, which are data frames, but they tweak some behaviors to make your life a little easier. In most places, you can use “tibble” and “data frame” interchangeably, so when we want to draw particular attention to R’s built-in data frame, we’ll write data.frame. 

Press "Run Code".


```{r subsetting-with-a-si-13, exercise = TRUE}
df1 <- data.frame(x = 1:3)
df2 <- tibble(x = 1:3)
```


###

If `df` is a data.frame, then `df[, cols]` will return a vector if `col` selects a single column and a data frame if it selects more than one column. If `df` is a tibble, then `[` will always return a `tibble.



## Subsetting with double brackets and a dollar sign
## Apply family
## For loops
## Plots
## Summary
### 

This tutorial covered [Chapter 28: A field guide to base R](https://r4ds.hadley.nz/base-r) from [*R for Data Science (2e)*](https://r4ds.hadley.nz/) by Hadley Wickham, Mine Çetinkaya-Rundel, and Garrett Grolemund. 
`


```{r download-answers, child = system.file("child_documents/download_answers.Rmd", package = "tutorial.helpers")}
```
